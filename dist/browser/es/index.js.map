{"version":3,"file":"index.js","sources":["../../../src/util.js","../../../src/Money.js","../../../src/Monval.js"],"sourcesContent":["export default {\n  isObject: v => Object.prototype.toString.call(v) === '[object Object]',\n  isNumber: v => typeof v == 'number' && Number.isFinite(v) === true,\n  isString: v => typeof v == 'string',\n  isNan: v => typeof v == 'number' && v != +v,\n  isNull: v => v === null\n}","import util from './util'\n\nfunction Money(monval, value, currencyCode) {\n  this.monval = monval\n  this.value = value\n  this.currencyCode = currencyCode\n\n  const data = this.monval.currencyData.filter(o => o.code == this.currencyCode)[0]\n  this.number = data.num\n  this.decilen = util.isNumber(this.monval.config.decilen)\n    ? this.monval.config.decilen\n    : parseFloat(data.deciLen)\n  this.nativeName = data.name\n}\n\nMoney.prototype.add = function add(numberOrRate, currencyCode=null) {\n  currencyCode = !currencyCode ? this.currencyCode : currencyCode\n\n  const isRate = util.isString(numberOrRate) && numberOrRate.indexOf('%') !== -1\n  if (isRate) {\n    const rate = parseFloat(numberOrRate.replace('%', ''))\n    if (util.isNan(rate)) {\n      throw new Error('Invalid rate.')\n    }\n    this.value = this.value + (this.value * rate / 100)\n  }\n  else {\n    const money2 = this.monval.create(numberOrRate, currencyCode)\n    if (money2.currencyCode == this.currencyCode) {\n      this.value += money2.value\n    }\n    else {\n      money2.exchange(this.currencyCode)\n      this.value += money2.value\n    }\n  }\n\n  return this\n}\n\nMoney.prototype.subtract = function subtract(numberOrRate, currencyCode=null) {\n  currencyCode = !currencyCode ? this.currencyCode : currencyCode\n\n  const isRate = util.isString(numberOrRate) && numberOrRate.indexOf('%') !== -1\n  if (isRate) {\n    const rate = parseFloat(numberOrRate.replace('%', ''))\n    if (util.isNan(rate)) {\n      throw new Error('Invalid rate.')\n    }\n    this.value = this.value - (this.value * rate / 100)\n  }\n  else {\n    const money2 = this.monval.create(numberOrRate, currencyCode)\n    if (money2.currencyCode == this.currencyCode) {\n      this.value -= money2.value\n    }\n    else {\n      money2.exchange(this.currencyCode)\n      this.value -= money2.value\n    }\n  }\n\n  return this\n}\n\nMoney.prototype.exchange = function exchange(target) {\n  target = target.toUpperCase()\n\n  this.value = this.exchangePure(this.value, target)\n  this.currencyCode = target\n\n  return this\n}\n\nMoney.prototype.exchangePure = function exchangePure(amount, target) {\n  if (!util.isObject(this.monval.exchangeRates)) {\n    throw new Error('No exchange rate data found.')\n  }\n  if (!this.monval.exchangeRates.hasOwnProperty(target)) {\n    throw new Error('No exchange rate found for \"' + target + '\"')\n  }\n  if (!this.monval.exchangeRates.hasOwnProperty(this.currencyCode)) {\n    throw new Error('No exchange rate found for \"' + this.currencyCode + '\"')\n  }\n\n  return amount * (\n    this.monval.exchangeRates[target] / this.monval.exchangeRates[this.currencyCode])\n}\n\nMoney.prototype.toFixed = function toFixed(decilen=null) {\n  const dlen = Number.isInteger(decilen) ? decilen : this.decilen\n  const str = this.monval.round(this.value, dlen).toString()\n  if (dlen > 0) {\n    if (str.indexOf('.') === -1) {\n      return str + '.' + Array.apply(null, Array(dlen)).map(Number.prototype.valueOf, 0).join('')\n    }\n    const outputlen = str.split('.')[1].length\n    if (dlen > outputlen) {\n      return str + Array.apply(null, Array(dlen - outputlen)).map(Number.prototype.valueOf, 0).join('')\n    }\n  }\n  return str\n}\n\nMoney.prototype.toFloat = function toFloat() {\n  return this.value\n}\n\nMoney.prototype.toObject = function toObject() {\n  return {\n    float: this.toFloat(),\n    currency: this.currencyCode\n  }\n}\n\nMoney.prototype.pretty = function pretty() {\n  const currency = this.monval.currencySymbolUnicodeMap.hasOwnProperty(this.currencyCode)\n    ? String.fromCharCode( parseInt(this.monval.currencySymbolUnicodeMap[this.currencyCode], 16) )\n    : this.currencyCode\n  return currency + ' ' + this.toFixed()\n}\n\nMoney.prototype.pad = function pad(len, char='0') {\n  let value = this.toFixed()\n  while (value.length < len) value = char + value\n  return value\n}\n\nexport default Money","import currencies from 'locale-util/data/core/currencies.json'\nimport Money from './Money'\nimport util from './util'\n\nfunction Monval(config=null) {\n  this.exchangeRates = null\n  this.readConfig(config)\n}\n\nMonval.prototype.currencySymbolUnicodeMap = {\n  TRY: '20BA', USD: '0024', EUR: '20ac', GBP: '00A3',\n  JPY: '00A5', AMD: '058F', AFN: '060B', THB: '0E3F',\n  SVC: '20A1', CRC: '20A1', INR: '20B9', BTC: '20BF'\n}\n\nMonval.prototype.currencyData = currencies\n\nMonval.prototype.updateExchangeRates = function updateExchangeRates(obj) {\n  this.exchangeRates = obj\n}\n\nMonval.prototype.readConfig = function readConfig(config) {\n  const defaultConfig = {\n    singleCurrency: false,\n    decilen: null\n  }\n  this.config = util.isObject(config)\n    ? Object.assign({}, defaultConfig, config)\n    : defaultConfig\n\n  if (this.config.singleCurrency !== false) {\n    this.config.singleCurrency = this.config.singleCurrency.toUpperCase()\n    const matches = this.currencyData.filter(o => o.code == this.config.singleCurrency)\n    if (!matches) {\n      throw new Error('Invalid singleCurrency. Please provide a valid 3-letter currency code.')\n    }\n  }\n\n  if (!util.isNull(this.config.decilen)) {\n    if (!util.isNumber(this.config.decilen)) {\n      throw new Error('Invalid decilen. Please provide a number.')\n    }\n  }\n}\n\nMonval.prototype.create = function create(value, currencyCode=null) {\n  if (util.isString(value)) value = parseFloat(value)\n\n  if (util.isNan(value) || !util.isNumber(value)) {\n    throw new Error('The value should be a number or float parsable string.')\n  }\n\n  if (this.config.singleCurrency !== false) {\n    currencyCode = this.config.singleCurrency\n  }\n  else {\n    const matches = this.currencyData.filter(o => o.code == currencyCode)\n    if (!matches) {\n      throw new Error('Invalid currencyCode. Please provide a valid 3-letter currency code.')\n    }\n  }\n\n  return new Money(this, value, currencyCode.toUpperCase())\n}\n\nMonval.prototype.round = function round(n, d, algorithm='GAUSSIAN') {\n  switch (algorithm) {\n    case 'GAUSSIAN':\n      const x = n * Math.pow(10, d)\n      const r = Math.round(x)\n      const br = Math.abs(x) % 1 === 0.5 ? (r % 2 === 0 ? r : r-1) : r\n      return br / Math.pow(10, d)\n      break;\n    default:\n      throw new Error('Unsupported rounding algorithm.')\n  }\n}\n\nexport default Monval"],"names":["isObject","v","Object","prototype","toString","call","isNumber","isString","isNan","isNull","Money","monval","value","currencyCode","data","currencyData","o","code","number","num","decilen","util","config","deciLen","nativeName","name","add","numberOrRate","isRate","rate","replace","Error","money2","create","exchange","subtract","target","toUpperCase","exchangePure","amount","exchangeRates","hasOwnProperty","toFixed","dlen","str","round","Array","apply","Number","valueOf","join","outputlen","split","length","toFloat","toObject","float","currency","pretty","currencySymbolUnicodeMap","String","fromCharCode","pad","len","char","Monval","readConfig","TRY","USD","EUR","GBP","JPY","AMD","AFN","THB","SVC","CRC","INR","BTC","currencies","updateExchangeRates","obj","defaultConfig","singleCurrency","matches","n","d","algorithm","x","Math","pow","r","br","abs"],"mappings":"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"}