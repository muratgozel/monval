{"version":3,"file":"index.js","sources":["../../../src/util.js","../../../src/Money.js","../../../src/Monval.js"],"sourcesContent":["export default {\n  isObject: v => Object.prototype.toString.call(v) === '[object Object]',\n  isNumber: v => typeof v == 'number' && Number.isFinite(v) === true,\n  isString: v => typeof v == 'string',\n  isNan: v => typeof v == 'number' && v != +v,\n  isNull: v => v === null\n}","import util from './util'\n\nfunction Money(monval, value, currencyCode) {\n  this.monval = monval\n  this.value = value\n  this.currencyCode = currencyCode\n\n  const data = this.monval.currencyData.filter(o => o.code == this.currencyCode)[0]\n  this.number = data.num\n  this.decilen = util.isNumber(this.monval.config.decilen)\n    ? this.monval.config.decilen\n    : parseFloat(data.deciLen)\n  this.nativeName = data.name\n}\n\nMoney.prototype.add = function add(numberOrRate, currencyCode=null) {\n  currencyCode = !currencyCode ? this.currencyCode : currencyCode\n\n  const isRate = util.isString(numberOrRate) && numberOrRate.indexOf('%') !== -1\n  if (isRate) {\n    const rate = parseFloat(numberOrRate.replace('%', ''))\n    if (util.isNan(rate)) {\n      throw new Error('Invalid rate.')\n    }\n    this.value = this.value + (this.value * rate / 100)\n  }\n  else {\n    const money2 = this.monval.create(numberOrRate, currencyCode)\n    if (money2.currencyCode == this.currencyCode) {\n      this.value += money2.value\n    }\n    else {\n      money2.exchange(this.currencyCode)\n      this.value += money2.value\n    }\n  }\n\n  return this\n}\n\nMoney.prototype.subtract = function subtract(numberOrRate, currencyCode=null) {\n  currencyCode = !currencyCode ? this.currencyCode : currencyCode\n\n  const isRate = util.isString(numberOrRate) && numberOrRate.indexOf('%') !== -1\n  if (isRate) {\n    const rate = parseFloat(numberOrRate.replace('%', ''))\n    if (util.isNan(rate)) {\n      throw new Error('Invalid rate.')\n    }\n    this.value = this.value - (this.value * rate / 100)\n  }\n  else {\n    const money2 = this.monval.create(numberOrRate, currencyCode)\n    if (money2.currencyCode == this.currencyCode) {\n      this.value -= money2.value\n    }\n    else {\n      money2.exchange(this.currencyCode)\n      this.value -= money2.value\n    }\n  }\n\n  return this\n}\n\nMoney.prototype.exchange = function exchange(target) {\n  target = target.toUpperCase()\n\n  this.value = this.exchangePure(this.value, target)\n  this.currencyCode = target\n\n  return this\n}\n\nMoney.prototype.exchangePure = function exchangePure(amount, target) {\n  if (!util.isObject(this.monval.exchangeRates)) {\n    throw new Error('No exchange rate data found.')\n  }\n  if (!this.monval.exchangeRates.hasOwnProperty(target)) {\n    throw new Error('No exchange rate found for \"' + target + '\"')\n  }\n  if (!this.monval.exchangeRates.hasOwnProperty(this.currencyCode)) {\n    throw new Error('No exchange rate found for \"' + this.currencyCode + '\"')\n  }\n\n  return amount * (\n    this.monval.exchangeRates[target] / this.monval.exchangeRates[this.currencyCode])\n}\n\nMoney.prototype.toFixed = function toFixed(decilen=null) {\n  const dlen = Number.isInteger(decilen) ? decilen : this.decilen\n  const str = this.monval.round(this.value, dlen).toString()\n  if (dlen > 0) {\n    if (str.indexOf('.') === -1) {\n      return str + '.' + Array.apply(null, Array(dlen)).map(Number.prototype.valueOf, 0).join('')\n    }\n    const outputlen = str.split('.')[1].length\n    if (dlen > outputlen) {\n      return str + Array.apply(null, Array(dlen - outputlen)).map(Number.prototype.valueOf, 0).join('')\n    }\n  }\n  return str\n}\n\nMoney.prototype.toFloat = function toFloat() {\n  return this.value\n}\n\nMoney.prototype.toObject = function toObject() {\n  return {\n    float: this.toFloat(),\n    currency: this.currencyCode\n  }\n}\n\nMoney.prototype.pretty = function pretty() {\n  const currency = this.monval.currencySymbolUnicodeMap.hasOwnProperty(this.currencyCode)\n    ? String.fromCharCode( parseInt(this.monval.currencySymbolUnicodeMap[this.currencyCode], 16) )\n    : this.currencyCode\n  return currency + ' ' + this.toFixed()\n}\n\nMoney.prototype.pad = function pad(len, char='0') {\n  let value = this.toFixed()\n  while (value.length < len) value = char + value\n  return value\n}\n\nexport default Money","import currencies from 'locale-util/data/core/currencies.json'\nimport Money from './Money'\nimport util from './util'\n\nfunction Monval(config=null) {\n  this.exchangeRates = null\n  this.readConfig(config)\n}\n\nMonval.prototype.currencySymbolUnicodeMap = {\n  TRY: '20BA', USD: '0024', EUR: '20ac', GBP: '00A3',\n  JPY: '00A5', AMD: '058F', AFN: '060B', THB: '0E3F',\n  SVC: '20A1', CRC: '20A1', INR: '20B9', BTC: '20BF'\n}\n\nMonval.prototype.currencyData = currencies\n\nMonval.prototype.updateExchangeRates = function updateExchangeRates(obj) {\n  this.exchangeRates = obj\n}\n\nMonval.prototype.readConfig = function readConfig(config) {\n  const defaultConfig = {\n    singleCurrency: false,\n    decilen: null\n  }\n  this.config = util.isObject(config)\n    ? Object.assign({}, defaultConfig, config)\n    : defaultConfig\n\n  if (this.config.singleCurrency !== false) {\n    this.config.singleCurrency = this.config.singleCurrency.toUpperCase()\n    const matches = this.currencyData.filter(o => o.code == this.config.singleCurrency)\n    if (!matches) {\n      throw new Error('Invalid singleCurrency. Please provide a valid 3-letter currency code.')\n    }\n  }\n\n  if (!util.isNull(this.config.decilen)) {\n    if (!util.isNumber(this.config.decilen)) {\n      throw new Error('Invalid decilen. Please provide a number.')\n    }\n  }\n}\n\nMonval.prototype.create = function create(value, currencyCode=null) {\n  if (util.isString(value)) value = parseFloat(value)\n\n  if (util.isNan(value) || !util.isNumber(value)) {\n    throw new Error('The value should be a number or float parsable string.')\n  }\n\n  if (this.config.singleCurrency !== false) {\n    currencyCode = this.config.singleCurrency\n  }\n  else {\n    const matches = this.currencyData.filter(o => o.code == currencyCode)\n    if (!matches) {\n      throw new Error('Invalid currencyCode. Please provide a valid 3-letter currency code.')\n    }\n  }\n\n  return new Money(this, value, currencyCode.toUpperCase())\n}\n\nMonval.prototype.round = function round(n, d, algorithm='GAUSSIAN') {\n  switch (algorithm) {\n    case 'GAUSSIAN':\n      const x = n * Math.pow(10, d)\n      const r = Math.round(x)\n      const br = Math.abs(x) % 1 === 0.5 ? (r % 2 === 0 ? r : r-1) : r\n      return br / Math.pow(10, d)\n      break;\n    default:\n      throw new Error('Unsupported rounding algorithm.')\n  }\n}\n\nexport default Monval"],"names":["isObject","v","Object","prototype","toString","call","isNumber","_Number$isFinite","isString","isNan","isNull","Money","monval","value","currencyCode","data","_filterInstanceProperty","currencyData","o","code","number","num","decilen","util","config","_parseFloat","deciLen","nativeName","name","add","numberOrRate","isRate","_indexOfInstanceProperty","rate","replace","Error","money2","create","exchange","subtract","target","toUpperCase","exchangePure","amount","exchangeRates","hasOwnProperty","toFixed","dlen","_Number$isInteger","str","round","_mapInstanceProperty","Array","apply","Number","valueOf","join","outputlen","split","length","toFloat","toObject","float","currency","pretty","currencySymbolUnicodeMap","String","fromCharCode","_parseInt","pad","len","char","Monval","readConfig","TRY","USD","EUR","GBP","JPY","AMD","AFN","THB","SVC","CRC","INR","BTC","currencies","updateExchangeRates","obj","defaultConfig","singleCurrency","_Object$assign","matches","n","d","algorithm","x","Math","pow","r","br","abs"],"mappings":"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"}